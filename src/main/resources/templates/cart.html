
<!-- TEMPLATE CODE USED HERE -->

<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="https://www.thymeleaf.org/extras/spring-security"
	 th:replace="~{layout :: layout(~{::section})}">

<section>

	<div class="container my-4">

		<h3 class="fw-bold mb-3">ðŸ›’ Shopping Cart</h3>

		<!-- ================= EMPTY CART ================= -->
		<div th:if="${#lists.isEmpty(cartItems)}"
			class="alert alert-light text-center p-4 border">
			<h5>Your cart is empty</h5>
			<p class="text-muted mb-3">Looks like you havenâ€™t added anything
				yet.</p>
			<a th:href="@{/shop}" class="btn btn-dark btn-sm"> Continue
				Shopping </a>
		</div>

		<!-- ================= CART TABLE ================= -->
		<div th:if="${!#lists.isEmpty(cartItems)}" class="row">

			<!-- LEFT : ITEMS -->
			<div class="col-md-8">

				<div class="table-responsive">
					<table class="table align-middle bg-white border">
						<thead class="table-light">
							<tr>
								<th>Product</th>
								<th class="text-center">Price</th>
								<th class="text-center">Quantity</th>
								<th class="text-center">Subtotal</th>
								<th class="text-center">Remove</th>
							</tr>
						</thead>

						<tbody>
							<tr th:each="item : ${cartItems}">

								<!-- PRODUCT -->
								<td><strong th:text="${item.product.name}"></strong></td>

								<!-- PRICE -->
								<td class="text-center">â‚¹<span
									th:text="${item.product.price}"></span>
								</td>

								<!-- QUANTITY -->
								<td class="text-center">
									<div
										class="d-flex justify-content-center align-items-center gap-1">

										<form
											th:action="@{/user/cart/decrease/{id}(id=${item.product.id})}"
											method="post" autocomplete="off">
											<button class="btn btn-outline-secondary btn-sm"
												th:disabled="${item.quantity <= 1}">âˆ’</button>
										</form>

										<span class="fw-semibold px-2" th:text="${item.quantity}">
										</span>

										<form
											th:action="@{/user/cart/increase/{id}(id=${item.product.id})}"
											method="post" autocomplete="off">
											<button class="btn btn-outline-secondary btn-sm">+</button>
										</form>

									</div>
								</td>

								<!-- SUBTOTAL -->
								<td class="text-center fw-semibold">â‚¹<span
									th:text="${item.product.price * item.quantity}"></span>
								</td>

								<!-- REMOVE -->
								<td class="text-center">
									<form
										th:action="@{/user/cart/remove/{id}(id=${item.product.id})}"
										method="post" autocomplete="off">
										<button class="btn btn-outline-danger btn-sm">
											<i class="bi bi-trash"></i>
										</button>
									</form>
								</td>

							</tr>
						</tbody>
					</table>
				</div>

				<!-- CLEAR CART -->
				<form th:action="@{/user/cart/clear}" method="post">
					<button class="btn btn-outline-danger btn-sm">Clear Cart</button>
				</form>

			</div>

			<!-- RIGHT : SUMMARY -->
			<div class="col-md-4">

				<div class="card border bg-white">
					<div class="card-body">

						<h5 class="fw-bold mb-3">Order Summary</h5>

						<div class="d-flex justify-content-between mb-2">
							<span>Total</span> <strong class="text-success"> â‚¹<span
								th:text="${total}"></span>
							</strong>
						</div>

						<hr>

						<!--  <a th:href="@{/user/checkout}"
                           class="btn btn-success w-100 mb-2">
                            Proceed to Checkout
                        </a>
 -->

						<form th:action="@{/user/orders/place}" method="post">
							<button type="submit" class="btn btn-success w-100 mb-2">
								Place Order</button>
						</form>

						<a th:href="@{/shop}" class="btn btn-outline-dark w-100 btn-sm">
							Continue Shopping </a>

					</div>
				</div>

			</div>

		</div>

	</div>

</section>
</html>




