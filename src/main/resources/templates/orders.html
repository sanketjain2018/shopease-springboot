<!-- <!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="https://www.thymeleaf.org/extras/spring-security"
      th:replace="layout :: layout(~{::section})">

<section>

    <style>
    
        .order-card {
            border-radius: 16px;
            border: none;
            box-shadow: 0 12px 30px rgba(0,0,0,0.08);
        }

        .timeline {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
            position: relative;
        }

        .timeline::before {
            content: "";
            position: absolute;
            top: 50%;
            left: 0;
            width: 100%;
            height: 4px;
            background: #e0e0e0;
            z-index: 0;
        }

        .step {
            position: relative;
            z-index: 1;
            text-align: center;
            width: 33%;
        }

        .step .circle {
            width: 34px;
            height: 34px;
            border-radius: 50%;
            margin: 0 auto 6px;
            background: #adb5bd;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
        }

        .step.active .circle {
            background: #0d6efd;
        }

        .step.done .circle {
            background: #198754;
        }

        .step p {
            font-size: 0.85rem;
            margin: 0;
            color: #555;
        }
    </style>

    <div class="container py-2">

        <h3 class="fw-bold mb-4">ðŸ“¦ My Orders</h3>

        EMPTY STATE
        <div th:if="${#lists.isEmpty(orders)}"
             class="alert alert-info text-center p-5">
            <h5>No orders yet</h5>
            <p class="mb-3">Looks like you havenâ€™t placed any order.</p>
            <a th:href="@{/shop}" class="btn btn-primary">
                Start Shopping
            </a>
        </div>

        ORDERS
        <div th:each="order : ${orders}">
            <div class="card order-card mb-4">
                <div class="card-body p-4">

                    HEADER
                    <div class="d-flex justify-content-between align-items-center mb-3">
                        <div>
                            <h6 class="mb-1 fw-bold">
                                Order #<span th:text="${order.id}"></span>
                            </h6>
                            <small class="text-muted">
                                <i class="bi bi-calendar"></i>
                                <span th:text="${#temporals.format(order.orderDate,'dd MMM yyyy, HH:mm')}"></span>
                            </small>
                        </div>

                        <div class="text-end">
                            <span class="badge bg-dark">
                                â‚¹<span th:text="${order.totalAmount}"></span>
                            </span>
                        </div>
                    </div>

                    TIMELINE
                    <div class="timeline">

                        PLACED
                        <div class="step"
                             th:classappend="${order.status == 'PLACED' or order.status == 'SHIPPED' or order.status == 'DELIVERED'} ? 'done' : ''">
                            <div class="circle">
                                <i class="bi bi-bag-check"></i>
                            </div>
                            <p>Placed</p>
                        </div>

                        SHIPPED
                        <div class="step"
                             th:classappend="${order.status == 'SHIPPED' or order.status == 'DELIVERED'} ? 'done' : (${order.status == 'PLACED'} ? 'active' : '')">
                            <div class="circle">
                                <i class="bi bi-truck"></i>
                            </div>
                            <p>Shipped</p>
                        </div>

                        DELIVERED
                        <div class="step"
                             th:classappend="${order.status == 'DELIVERED'} ? 'done' : ''">
                            <div class="circle">
                                <i class="bi bi-house-check"></i>
                            </div>
                            <p>Delivered</p>
                        </div>

                    </div>

                    ACTIONS
                    <div class="d-flex justify-content-end gap-2 mt-4">

                        <a th:href="@{/user/orders/{id}(id=${order.id})}"
                           class="btn btn-outline-primary btn-sm">
                            View Details
                        </a>

                        <form th:if="${order.status == 'PLACED'}"
                              th:action="@{/user/orders/cancel/{id}(id=${order.id})}"
                              method="post">
                            <button class="btn btn-outline-danger btn-sm">
                                Cancel
                            </button>
                        </form>

                    </div>

                </div>
            </div>
        </div>

    </div>

</section>
</html>
 -->
 
 
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="https://www.thymeleaf.org/extras/spring-security"
      th:replace="layout :: layout(~{::section})">

<section>

<style>
    .order-row {
        background: #fff;
        border-radius: 10px;
        padding: 10px 14px;
        margin-bottom: 8px;
        box-shadow: 0 6px 14px rgba(0,0,0,0.06);
        font-size: 0.9rem;
    }

    .badge-id {
        background: #e7f1ff;
        color: #0d6efd;
    }

    .badge-amount {
        background: #e8fff3;
        color: #198754;
    }

    .badge-placed { background: #0d6efd; }
    .badge-shipped { background: #ffc107; color:#000; }
    .badge-delivered { background: #198754; }
    .badge-cancelled { background: #dc3545; }

    .timeline-icons i {
        font-size: 14px;
        margin-right: 6px;
        color: #adb5bd;
    }

    .timeline-icons .done {
        color: #198754;
    }
</style>

<div class="container py-3">

    <h5 class="fw-bold mb-3">ðŸ“¦ My Orders</h5>

    <!-- EMPTY STATE -->
    <div th:if="${#lists.isEmpty(orders)}"
         class="alert alert-info text-center py-4">
        You have not placed any orders yet.
        <div class="mt-2">
            <a th:href="@{/shop}" class="btn btn-sm btn-primary">
                Start Shopping
            </a>
        </div>
    </div>

    <!-- ORDERS LIST -->
    <div th:each="order : ${orders}" class="order-row">

        <div class="row align-items-center g-2">

            <!-- ORDER ID -->
            <div class="col-md-2">
                <span class="badge badge-id">
                    ORDER #<span th:text="${order.id}"></span>
                </span>
            </div>

            <!-- DATE -->
            <div class="col-md-2 text-muted">
                <i class="bi bi-calendar"></i>
                <span th:text="${#temporals.format(order.orderDate,'dd MMM yyyy')}"></span>
            </div>

            <!-- TIMELINE -->
            <div class="col-md-3 timeline-icons">
                <i class="bi bi-bag-check done"></i>
                <i class="bi bi-truck"
                   th:classappend="${order.status == 'SHIPPED' or order.status == 'DELIVERED'} ? ' done' : ''"></i>
                <i class="bi bi-house-check"
                   th:classappend="${order.status == 'DELIVERED'} ? ' done' : ''"></i>
            </div>

            <!-- AMOUNT -->
            <div class="col-md-2">
                <span class="badge badge-amount">
                    â‚¹<span th:text="${order.totalAmount}"></span>
                </span>
            </div>

            <!-- STATUS -->
            <div class="col-md-1">
                <span class="badge"
                      th:text="${order.status}"
                      th:classappend="
                        ${order.status == 'PLACED'} ? ' badge-placed' :
                        (${order.status == 'SHIPPED'} ? ' badge-shipped' :
                        (${order.status == 'DELIVERED'} ? ' badge-delivered' : ' badge-cancelled'))">
                </span>
            </div>

            <!-- ACTIONS -->
            <div class="col-md-2 text-end">
                <a th:href="@{/user/orders/{id}(id=${order.id})}"
                   class="btn btn-outline-primary btn-sm">
                    View
                </a>

                <form th:if="${order.status == 'PLACED'}"
                      th:action="@{/user/orders/cancel/{id}(id=${order.id})}"
                      method="post"
                      class="d-inline">
                    <button class="btn btn-outline-danger btn-sm">
                        Cancel
                    </button>
                </form>
            </div>

        </div>

    </div>

</div>

</section>
</html>

 